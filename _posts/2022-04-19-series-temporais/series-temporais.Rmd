---
title: "series temporais"
categories:
  - series temporais
  - finanças públicas
description: |
  Nesse post é analisado como se comporta a combinação de modelos de séries temporais na previsão da série de tempo Arrecadação Federal. Neste estudo é visto que a simples ponderação de igualitária entre os modelos pode melhorar as previsões quando comparada com o modelo benchmark.
author:
  - name: Breno Pereira
    url: https://www.linkedin.com/in/brenosapereira/
date: 2022-04-19
output:
  distill::distill_article:
    self_contained: false
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(
	echo = TRUE,
	message = FALSE,
	warning = FALSE
)
```

# Combinação de previsões de séries temporais

No âmbito das séries temporais, diversos modelos são propostos com o intuito de melhorar as previsões das variáveis, tanto para o curto prazo, como para o longo prazo . Cada um destes modelos aborda de forma diferente os componentes das séris temporais, a saber:

-   Tendência: capta elementos de longo prazo relacionados com a série de tempo;

-   Sazonalidade: capta os padrões regulares da séries de tempo;

-   Ciclo: caracterizado por longas ondas, mais ou menos regulares, em torno de uma linha de tendência, o ciclo não possui intervalos fixos, o que o diferencia da sazonalidade;

-   Resíduo: são flutuações inexplicáveis, captando todos os efeitos que não foram incorporados pela série de tempo nos componentes anteriores.

Neste caminho, alguns estudos identificam que a combinação de previsões (em inglês, *ensenmble forecasting*) podem apresentar resultados mais precisos do que as previsões dos modelos em separado. Como forma de estudar este teoria, neste post será abordado a combinação de modelos de previsões atráves do pacote do **R** [forecastHybrid](https://github.com/ellisp/forecastHybrid).

A série de tempo utilizada será a Arrecadação federal, que é a soma das receitas administradas pela Receita Federal com as receitas administradas por outros órgãos, obtida através do pacote [ipeadatar](https://github.com/gomesleduardo/ipeadatar), uma alternativa para a utilização da base de dados do Instituto de Pesquisa Econômica Aplicada (IPEA).

```{r}

library(dplyr)
library(ggplot2)
library(forecast)
library(ipeadatar)  # para baixar a série de arrecadação
library(forecastHybrid)  # pacote para

# código da variável Arrecadação Federal == SRF12_TOTGER12
arrecadacao <- ipeadata(code = 'SRF12_TOTGER12', language = 'br') %>% 
  filter

# transformando em série temporal
arrecadacao_ts <- arrecadacao %>% 
  filter(date < '2020-01-01') %>% 
  select(value) %>% 
  ts(., start = c(1993, 1), frequency = 12)

arrecadacao_ts %>% 
  autoplot()
```

## Amostras de treino e teste

